# Create a ready-to-use /thanks/index.html with the provided Pixel ID and Purchase event
import os, datetime, textwrap, zipfile

pixel_id = "1638212310125907"

root = "/mnt/data/decodificando-thanks"
os.makedirs(root, exist_ok=True)

thanks_html = f"""<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Obrigado pela compra â€” Decodificando o Amor</title>
    <meta name="description" content="Pedido confirmado. Acesso imediato ao e-book Decodificando o Amor.">
    <link rel="canonical" href="https://www.psicologoafetivo.com.br/decodificando/thanks"/>

    <!-- Tailwind (via CDN) para um estilo simples -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style> body, button {{ font-family: Arial, ui-sans-serif, system-ui; }} </style>

    <!-- Meta Pixel base -->
    <script>
    !function(f,b,e,v,n,t,s){{if(f.fbq)return;n=f.fbq=function(){{n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)}};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}}(window,document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');fbq('init','{pixel_id}');fbq('track','PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id={pixel_id}&ev=PageView&noscript=1"/></noscript>

    <!-- Evento de conversÃ£o: Purchase -->
    <script>
      fbq('track','Purchase',{{value:39.00,currency:'BRL'}});
    </script>
  </head>
  <body class="bg-white text-black min-h-screen flex items-center justify-center p-6">
    <div class="max-w-xl w-full p-8 rounded-3xl border border-gray-200 text-center shadow-sm">
      <h1 class="text-3xl font-extrabold">Pedido confirmado! ðŸŽ‰</h1>
      <p class="mt-3 text-gray-800">Obrigado por adquirir <strong>Decodificando o Amor</strong>.</p>
      <p class="mt-1 text-gray-800">VocÃª receberÃ¡ o e-mail da plataforma com o acesso ao e-book.</p>

      <div class="mt-6 grid gap-3">
        <a href="https://www.psicologoafetivo.com.br" class="px-5 py-3 rounded-2xl bg-black text-white font-semibold hover:opacity-80 transition">Voltar ao site</a>
        <a href="https://pay.hotmart.com/G96223351O" class="px-5 py-3 rounded-2xl border border-gray-300 hover:bg-gray-50 transition">Ver comprovante no checkout</a>
      </div>

      <p class="mt-6 text-xs text-gray-500">Se tiver qualquer dÃºvida, responda o e-mail de confirmaÃ§Ã£o para falar comigo.</p>
      <p class="mt-2 text-xs text-gray-400">Â© {datetime.datetime.now().year} Felipe Melo Souza Santos â€” @psicologoafetivo</p>
    </div>
  </body>
</html>
"""

with open(os.path.join(root, "index.html"), "w", encoding="utf-8") as f:
    f.write(thanks_html)

# Also zip for convenience
zip_path = "/mnt/data/decodificando-thanks.zip"
with zipfile.ZipFile(zip_path, "w", zipfile.ZIP_DEFLATED) as z:
    z.write(os.path.join(root, "index.html"), arcname="thanks/index.html")

zip_path
